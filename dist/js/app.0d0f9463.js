(function(){"use strict";var t={2484:function(t,e,o){var r=o(5130),s=o(6768),n=o(4232);const a={id:"app",class:"container"},c=(0,s.Lk)("header",null,[(0,s.Lk)("title",null,"After School Program")],-1);function i(t,e,o,r,i,l){const u=(0,s.g2)("ProductList"),d=(0,s.g2)("CheckoutPage");return(0,s.uX)(),(0,s.CE)("div",a,[c,(0,s.Lk)("main",null,["ProductList"===i.activeComponent?((0,s.uX)(),(0,s.Wv)(u,{key:0,onAddProducts:l.addToCart,serverUrl:i.serverUrl},null,8,["onAddProducts","serverUrl"])):(0,s.Q3)("",!0),"CheckoutPage"===i.activeComponent?((0,s.uX)(),(0,s.Wv)(d,{key:1,cart:i.cart,onRemoveFromCart:l.removeFromCart,onClearCart:l.clearCart},null,8,["cart","onRemoveFromCart","onClearCart"])):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>l.changeComponent&&l.changeComponent(...t)),class:"btn btn-primary m-3"},"Proceed to Checkout ("+(0,n.v_)(l.cartItemCount)+")",1)])])}o(4603),o(7566),o(8721);const l=t=>((0,s.Qi)("data-v-29665306"),t=t(),(0,s.jt)(),t),u={class:"container mt-4"},d=l((()=>(0,s.Lk)("h1",null,"Checkout Page",-1))),h={class:"card-body"},p=["onClick"],m={class:"form-group"},v=l((()=>(0,s.Lk)("label",null,"Name: ",-1))),f={class:"form-group"},L=l((()=>(0,s.Lk)("label",null,"Phone number: ",-1))),k=["disabled"],C={key:0,style:{color:"red"}},y={key:1,style:{color:"green"}};function b(t,e,o,a,c,i){return(0,s.uX)(),(0,s.CE)("div",u,[d,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.cartItems,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t._id,class:"card mb-3"},[(0,s.Lk)("div",h,[(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,(0,n.v_)(t.title),1),(0,s.eW)(" (Quantity: "+(0,n.v_)(t.quantity)+")",1)]),(0,s.Lk)("p",null,"Location: "+(0,n.v_)(t.location),1),(0,s.Lk)("p",null,"Price: $"+(0,n.v_)(t.price),1),(0,s.Lk)("button",{onClick:e=>i.removeFromCart(t),class:"btn btn-danger"},"Remove",8,p)])])))),128)),(0,s.Lk)("div",m,[v,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.name=t),type:"text",pattern:"^[a-zA-Z\\s]+$",required:"",class:"form-control"},null,512),[[r.Jo,c.name]])]),(0,s.Lk)("div",f,[L,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.phone=t),type:"text",pattern:"^\\d+$",required:"",class:"form-control"},null,512),[[r.Jo,c.phone]])]),(0,s.Lk)("button",{disabled:!i.validForm,onClick:e[2]||(e[2]=(...t)=>i.checkout&&i.checkout(...t)),class:"btn btn-primary"},"Checkout",8,k),i.validForm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",C,"Please fill out all fields correctly.")),c.checkoutMessage?((0,s.uX)(),(0,s.CE)("p",y,(0,n.v_)(c.checkoutMessage),1)):(0,s.Q3)("",!0)])}o(4114);var g={name:"CheckoutPage",props:{cart:{type:Object,required:!0}},data(){return{name:"",phone:"",checkoutMessage:""}},computed:{cartItems(){return Object.values(this.cart)},validForm(){return""!==this.name.trim()&&this.phone.match(/^\d+$/)}},methods:{removeFromCart(t){this.$emit("remove-from-cart",t)},async checkout(){if(this.validForm)try{const t={lessons:this.cartItems,username:this.name,phonenumber:this.phone},e=await fetch("https://backend-ten-inky-80.vercel.app/collection/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Error creating order: ${e.statusText}`);this.checkoutMessage=`Order created successfully for ${this.name} (phone: ${this.phone})!`,this.$emit("clear-cart"),setTimeout((()=>{this.$router.push("/")}),2e3)}catch(t){console.error("Error:",t.message),alert(`Failed to create order: ${t.message}`)}}}},P=o(1241);const w=(0,P.A)(g,[["render",b],["__scopeId","data-v-29665306"]]);var O=w;const _=t=>((0,s.Qi)("data-v-5904936f"),t=t(),(0,s.jt)(),t),S={class:"container"},A=_((()=>(0,s.Lk)("h1",null,"After School Program",-1))),j={class:"search-sort"},F=_((()=>(0,s.Lk)("option",{value:"priceAsc"},"Sort by Price: Low to High",-1))),I=_((()=>(0,s.Lk)("option",{value:"priceDesc"},"Sort by Price: High to Low",-1))),E=_((()=>(0,s.Lk)("option",{value:"locationAsc"},"Sort by Location: A to Z",-1))),$=_((()=>(0,s.Lk)("option",{value:"locationDesc"},"Sort by Location: Z to A",-1))),Q=[F,I,E,$],q={class:"row"},T={class:"card"},U={class:"card-body"},X=["disabled","onClick"];function x(t,e,o,a,c,i){return(0,s.uX)(),(0,s.CE)("div",S,[A,(0,s.Lk)("div",j,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.searchQuery=t),onInput:e[1]||(e[1]=(...t)=>i.filterLessons&&i.filterLessons(...t)),class:"form-control",placeholder:"Search by subject or location"},null,544),[[r.Jo,c.searchQuery]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>c.sortOrder=t),onChange:e[3]||(e[3]=(...t)=>i.sortLessons&&i.sortLessons(...t)),class:"form-control ml-2"},Q,544),[[r.u1,c.sortOrder]])]),(0,s.Lk)("div",q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.sortedLessons,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"col-md-4 mt-1 mb-1 shadow"},[(0,s.Lk)("div",T,[(0,s.Lk)("div",U,[(0,s.Lk)("i",{class:(0,n.C4)(t.icon)},null,2),(0,s.Lk)("h2",null,(0,n.v_)(t.title),1),(0,s.Lk)("h5",null,(0,n.v_)(t.subject),1),(0,s.Lk)("p",null,"Location: "+(0,n.v_)(t.location),1),(0,s.Lk)("p",null,"Price: AED"+(0,n.v_)(t.price),1),(0,s.Lk)("p",null,"Spaces: "+(0,n.v_)(t.spaces),1),(0,s.Lk)("button",{disabled:0===t.spaces,onClick:e=>i.addToCart(t),class:"btn btn-primary"}," Add to Cart ",8,X)])])])))),128))])])}var J={name:"ProductList",data(){return{filteredLessons:[],cart:JSON.parse(localStorage.getItem("cart"))||{},searchQuery:"",sortOrder:"priceAsc"}},created(){this.getLessons()},methods:{async getLessons(){const t=new URL(this.$root.serverUrl+"/collection/products"),e=await fetch(t);if(e.ok){const t=await e.json();this.lessons=t,this.filteredLessons=t,this.sortLessons()}else console.error("Failed to fetch lessons:",e.statusText)},addToCart(t){this.$emit("addProducts",t)},toggleCart(){this.showCart=!this.showCart},removeFromCart(t){this.cart[t.id].quantity>1?this.cart[t.id].quantity--:delete this.cart[t.id],localStorage.setItem("cart",JSON.stringify(this.cart))},filterLessons(){this.filteredLessons=this.lessons.filter((t=>t.subject.toLowerCase().includes(this.searchQuery.toLowerCase())||t.location.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.sortLessons()},sortLessons(){const t={priceAsc:(t,e)=>t.price-e.price,priceDesc:(t,e)=>e.price-t.price,locationAsc:(t,e)=>t.location.localeCompare(e.location),locationDesc:(t,e)=>e.location.localeCompare(t.location)};this.filteredLessons.sort(t[this.sortOrder])}},computed:{cartItemCount(){return Object.values(this.cart).reduce(((t,e)=>t+e.quantity),0)},sortedLessons(){return this.filteredLessons}},watch:{searchQuery:"filterLessons",sortOrder:"sortLessons"}};const N=(0,P.A)(J,[["render",x],["__scopeId","data-v-5904936f"]]);var D=N,M={name:"App",components:{ProductList:D,CheckoutPage:O},data(){return{serverUrl:"https://backend-ten-inky-80.vercel.app",cart:JSON.parse(localStorage.getItem("cart"))||{},activeComponent:"ProductList"}},computed:{cartItemCount(){return Object.values(this.cart).reduce(((t,e)=>t+e.quantity),0)}},methods:{changeComponent(){this.activeComponent="ProductList"===this.activeComponent?"CheckoutPage":"ProductList"},addToCart(t){t.spaces>0&&(this.cart[t._id]||(this.cart[t._id]={...t,quantity:0}),this.cart[t._id].quantity++,t.spaces--,localStorage.setItem("cart",JSON.stringify(this.cart)))},removeFromCart(t){this.cart[t._id].quantity>1?this.cart[t._id].quantity--:delete this.cart[t._id],localStorage.setItem("cart",JSON.stringify(this.cart))},clearCart(){this.cart={},localStorage.setItem("cart",JSON.stringify(this.cart))},async getLessons(){const t=new URL(this.$root.serverUrl+"/collection/products"),e=await fetch(t);if(e.ok){const t=await e.json();this.lessons=t,this.filteredLessons=t,this.sortLessons()}else console.error("Failed to fetch lessons:",e.statusText)}}};const R=(0,P.A)(M,[["render",i]]);var V=R,W=o(1387);const Z=[{path:"/",name:"ProductList",component:D},{path:"/CheckoutPage.vue",name:"CheckoutPage",component:O}],H=(0,W.aE)({history:(0,W.LA)(),routes:Z});var K=H;const z=(0,r.Ef)(V);z.use(K),z.mount("#app")}},e={};function o(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,r,s,n){if(!r){var a=1/0;for(u=0;u<t.length;u++){r=t[u][0],s=t[u][1],n=t[u][2];for(var c=!0,i=0;i<r.length;i++)(!1&n||a>=n)&&Object.keys(o.O).every((function(t){return o.O[t](r[i])}))?r.splice(i--,1):(c=!1,n<a&&(a=n));if(c){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[r,s,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,a=r[0],c=r[1],i=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(s in c)o.o(c,s)&&(o.m[s]=c[s]);if(i)var u=i(o)}for(e&&e(r);l<a.length;l++)n=a[l],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(u)},r=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(2484)}));r=o.O(r)})();
//# sourceMappingURL=app.0d0f9463.js.map